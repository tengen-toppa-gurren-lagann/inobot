# inobot

## Описание
Телеграм-бот для чата, поддерживающий классовое неравенство.

## Возможности
- **Добавляет метку пользователю и выводит соответствующий ответ в зависимости от неё** - основной функционал проекта
- **Команда ```/start```** - старт и регистрация в базе данных бота. Если пользователь не был зарегистрирован, выдастся приветственное сообщение, иначе - уведомление, что пользователь в базе уже присутствует.
- **Команда ```/help```** - получение информации о командах бота.
- **Команда ```/Хто_я```** - информирует пользователя о его статусе и правах (является ли он администратором).
- **Команда ```/Госуслуги```** - вызывает меню с кнопками для контроля бота.
  - **Меню** содержит в себе 4 кнопки с различным функционалом.
    - **Кнопка ```Список иноагентов```** - осуществляет обращение к базе данных и выводит списком всех, кто отмечен как иноагент.
- - Функционал всех кнопок ниже доступен только обладателю статуса администратора.
    - **Кнопка ```Оповестить```** - аналогична предыдущей функции, но вместо списка выдаёт сообщение, в котором происходит упоминание всех отмеченных лиц.
    - **Кнопка ```Добавить иноагента```** - меняет в базе данных метку регалии "иноагент" на положительную для конкретного пользователя.
      - Для всех пользователей с такой меткой каждое их сообщение, не являющееся командой или вызовом кнопки помечается соответствующей плашкой.
    - **Кнопка ```Амнистировать иноагента```** - меняет в базе данных метку регалии "иноагент" на отрицательную для конкретного пользователя.
- ## Запуск проекта
- Для начала требуется склонировать репозиторий:

```git clone https://github.com/tengen-toppa-gurren-lagann/inobot.git```

- Потом следует выбрать один из видов запуска проекта, которые разобраны в главах ниже.
- После успешного запуска следует перейти в Telegram ```https://web-telegram.ru/```
- Создадим новый чат с нашим ботом, для этого найдите его по тегу ```@inoagentsbot```

![Find bot ](examples/2.pngs)

- Нажимаем на кнопку ```start``` или вводим аналогичную команду и можем начинать пользоваться ботом. Весь функционал описан в разделе ```Возможности```

### Обычный запуск проекта
Запустите проект в среде PyCharm путем выбора необходимой папки (см. рис ниже):

![Open Project](examples/3.png)

Затем настройте интерпретатор Python, для этого перейдите ```File->Settings->Project:inobot->Python Interpreter``` и выполните следующую настройку:

![Open Project](examples/4.png)

Теперь следует добавить все необходимые библиотеки в проект, для этого следует в консоли ввести следующую команду:
```pip install -r requirements.txt```
Можно использовать консоль прямо из Pycharm, как показано ниже

![Open Project](examples/5.png)

Или же перейти в папку проекта и добавить их через обычную консоль, как показано ниже

![Open Project](examples/6.png)

Теперь откройте файл ```main.py``` и на строке 15 запустите бота:

![Start Bot](examples/7.png)

Если при запуске возникли какие-то сбои, то для проверки перейдите в окно подключенных модулей и проверьте их в соответствии со следующим фото:

```File->Settings->Project:inobot->Python Interpreter```

![Packages](examples/8.png)

### Запуск проекта при помощи Docker
При помощи командной строки перейдите в папку проекта и проверьте наличие всех файлов:
```cd PyCharmProjects/inobot```

![Docker Check Files](examples/9.png)

Теперь создайте образ при помощи следующей команды:
```sudo docker build -t dockerfile .```

![Docker Build Image](examples/10.png)

После создания образа его можно запустить в Docker Desktop:

![Docker Run Image](examples/11.png)

## Пример работы проекта

Теперь перейдем в Telegram и найдем нашего бота:

![Usage 1](examples/2.png)

Начнем работу:

![Usage 2](examples/bot-1.png)

Введём ```/help```:

![Usage 3](examples/1.png)

Введём ```/Хто_я```:

![Usage 4](examples/bot-2.png)

Введём ```/Госуслуги```:

![Usage 5](examples/bot-3.png)

Если была нажата кнопка ```Список иноагентов```:

![Usage 6](examples/bot-4.png)

Если была нажата кнопка ```Оповестить```:

![Usage 7](examples/bot-5.png)

Если была нажата кнопка ```Добавить иноагента```:

![Usage 8](examples/bot-6.png)

Если была нажата кнопка ```Список иноагентов``` после этого:

![Usage 9](examples/bot-7.png)

Если была нажата кнопка ```Амнистировать иноагента```:

![Usage 10](examples/bot-8.png)

Если была нажата кнопка ```Список иноагентов``` после этого:

![Usage 11](examples/bot-9.png)

Сообщение, которое прикрепляет бот к пользователю, имеющему статус иноагента:  

![Usage 12](examples/bot-10.png)
